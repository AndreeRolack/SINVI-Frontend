<link rel="import" href="./new/ha-badge.html">
<link rel="import" href="./new/custom-badge.html">

<script>
class HaBadgeChooserZ extends Polymer.Element {
  static get is() { return 'ha-badge-chooser-z'; }
  static get properties() {
    return {
      hass: {
        type: Object,
        observer: 'hassChanged'
      },
      cardItem: {
        type: Object,
        observer: 'cardItemChanged'
      }
    };
  }

  hassChanged(hass) {
    const cardRoot = this;

    for(let i = 0; i < cardRoot.children.length; i++) {
      cardRoot.children[i].hass = hass;
    }
  }

  cardItemChanged(cardItem) {
    const cardRoot = this;
    while (cardRoot.lastChild) {
      cardRoot.removeChild(cardRoot.lastChild);
    }
    const elementTag = cardItem && cardItem.config && cardItem.config.card || 'ha-badge';
    const element = document.createElement(elementTag);
    element.cardItem = cardItem;
    element.hass = this.hass;
    cardRoot.appendChild(element);
  }
}
customElements.define(HaBadgeChooserZ.is, HaBadgeChooserZ);
</script>